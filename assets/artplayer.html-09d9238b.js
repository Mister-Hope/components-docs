import{r as k,o as f,c as q,b as n,d as s,a,w as t,f as m,e as d,_ as A}from"./app-9184d182.js";import{a as P}from"./artplayer-plugin-danmuku-12412fdf.js";import{_ as w}from"./plugin-vue_export-helper-c27b6911.js";import"./commonjsHelpers-725317a4.js";import"./commonjs-dynamic-modules-302442b1.js";const x={href:"https://github.com/zhw2590582/ArtPlayer",target:"_blank",rel:"noopener noreferrer"},D=n("p",null,[s("使用本组件前，请先在你的项目中安装 "),n("code",null,"plyr"),s(" 包:")],-1),j=n("div",{class:"language-bash","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"pnpm"),s(),n("span",{class:"token function"},"add"),s(),n("span",{class:"token parameter variable"},"-D"),s(` plyr
`)])])],-1),I=n("div",{class:"language-bash","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"yarn"),s(),n("span",{class:"token function"},"add"),s(),n("span",{class:"token parameter variable"},"-D"),s(` plyr
`)])])],-1),M=n("div",{class:"language-bash","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"npm"),s(" i "),n("span",{class:"token parameter variable"},"-D"),s(` plyr
`)])])],-1),N={class:"hint-container tip"},L=n("p",{class:"hint-container-title"},"提示",-1),S=n("code",null,"ArtPlayer",-1),T={href:"https://github.com/zhw2590582/ArtPlayer",target:"_blank",rel:"noopener noreferrer"},E={href:"https://artplayer.org/document/",target:"_blank",rel:"noopener noreferrer"},O=n("h2",{id:"案例",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#案例","aria-hidden":"true"},"#"),s(" 案例")],-1),C=n("div",{class:"language-markdown","data-ext":"md"},[n("pre",{class:"language-markdown"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ArtPlayer")]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`)])])],-1),U=n("div",{class:"language-markdown","data-ext":"md"},[n("pre",{class:"language-markdown"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ArtPlayer")]),s(`
  `),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"poster"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("/poster.svg"),n("span",{class:"token punctuation"},'"')]),s(`
`),n("span",{class:"token punctuation"},"/>")]),s(`
`)])])],-1),K=n("div",{class:"language-markdown line-numbers-mode","data-ext":"md"},[n("pre",{class:"language-markdown"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ArtPlayer")]),s(`
  `),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"airplay"),s(`
  `),n("span",{class:"token attr-name"},"aspect-ratio"),s(`
  `),n("span",{class:"token attr-name"},"auto-size"),s(`
  `),n("span",{class:"token attr-name"},"auto-orientation"),s(`
  `),n("span",{class:"token attr-name"},"auto-playback"),s(`
  `),n("span",{class:"token attr-name"},"fast-forward"),s(`
  `),n("span",{class:"token attr-name"},"flip"),s(`
  `),n("span",{class:"token attr-name"},"fullscreen-web"),s(`
  `),n("span",{class:"token attr-name"},"lock"),s(`
  `),n("span",{class:"token attr-name"},"loop"),s(`
  `),n("span",{class:"token attr-name"},"is-live"),s(`
  `),n("span",{class:"token attr-name"},"muted"),s(`
  `),n("span",{class:"token attr-name"},"mini-progress-bar"),s(`
  `),n("span",{class:"token attr-name"},"pip"),s(`
  `),n("span",{class:"token attr-name"},"screenshot"),s(`
  `),n("span",{class:"token attr-name"},"subtitle-offset"),s(`
`),n("span",{class:"token punctuation"},"/>")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),H=d(`<h2 id="属性" tabindex="-1"><a class="header-anchor" href="#属性" aria-hidden="true">#</a> 属性</h2><h3 id="src" tabindex="-1"><a class="header-anchor" href="#src" aria-hidden="true">#</a> src</h3><ul><li>类型: <code>string</code></li><li>必填: 是</li></ul><p>视频源文件地址</p><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h3><ul><li>类型: <code>string</code></li><li>必填: 否</li></ul><p>视频类型</p><h3 id="title" tabindex="-1"><a class="header-anchor" href="#title" aria-hidden="true">#</a> title</h3><ul><li>类型: <code>string</code></li><li>必填: 否</li></ul><p>视频标题</p><h3 id="poster" tabindex="-1"><a class="header-anchor" href="#poster" aria-hidden="true">#</a> poster</h3><ul><li>类型: <code>string</code></li><li>必填: 否</li></ul><p>视频封面</p><h3 id="width" tabindex="-1"><a class="header-anchor" href="#width" aria-hidden="true">#</a> width</h3><ul><li>类型: <code>string | number</code></li><li>默认值: <code>&quot;100%&quot;</code></li></ul><p>播放器宽度</p><h3 id="height" tabindex="-1"><a class="header-anchor" href="#height" aria-hidden="true">#</a> height</h3><ul><li>类型: <code>string | number</code></li><li>必填: 否</li></ul><p>播放器高度</p><h3 id="ratio" tabindex="-1"><a class="header-anchor" href="#ratio" aria-hidden="true">#</a> ratio</h3><ul><li>类型: <code>string | number</code></li><li>默认值: <code>16:9</code></li></ul><p>播放器比例</p><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><p>ArtPlayer 组件还支持布尔属性。</p><p>你可以添加以下属性以启用相关功能:</p><ul><li>airplay</li><li>autoplay</li><li>aspect-ratio</li><li>auto-mini</li><li>auto-size</li><li>auto-orientation</li><li>auto-playback</li><li>fast-forward</li><li>flip</li><li>fullscreen-web</li><li>lock</li><li>loop</li><li>is-live</li><li>muted</li><li>mini-progress-bar</li><li>pip</li><li>screenshot</li><li>subtitle-offset</li></ul><p>你还可以添加以下属性来禁用相关功能：</p><ul><li>no-fullscreen</li><li>no-hotkey</li><li>no-playback-rate</li><li>no-setting</li><li>no-mutex</li><li>no-plays-inline</li></ul><h3 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> config</h3><ul><li><p>类型: <code>ArtPlayerOptions</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Option <span class="token keyword">as</span> ArtPlayerInitOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;artplayer/types/option.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">ArtPlayerOptions</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>
  Omit<span class="token operator">&lt;</span>
    ArtPlayerInitOptions<span class="token punctuation">,</span>
    <span class="token operator">|</span> <span class="token string">&quot;container&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;url&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;customType&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;plugins&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;contextmenu&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;controls&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;layers&quot;</span>
    <span class="token operator">|</span> <span class="token string">&quot;settings&quot;</span>
  <span class="token operator">&gt;</span>
<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>必填: 否</p></li></ul><p>自定义 ArtPlayer。</p>`,31),B={href:"https://artplayer.org/document/start/option.html",target:"_blank",rel:"noopener noreferrer"},V=d(`<h3 id="customplayer" tabindex="-1"><a class="header-anchor" href="#customplayer" aria-hidden="true">#</a> customPlayer</h3><ul><li>类型: <code>(player: ArtPlayer) =&gt; Artplayer | void | Promise&lt;Artplayer&gt; | Promise&lt;void&gt;</code></li><li>必填: 否</li></ul><p>该函数接收当前 ArtPlayer 实例作为参数，因此你可以通过它进行自定义。</p><h2 id="全局配置" tabindex="-1"><a class="header-anchor" href="#全局配置" aria-hidden="true">#</a> 全局配置</h2><p>你可以通过插件选项中的 <code>componentOptions.artPlayer</code> 为所有 ArtPlayer 组件设置全局配置。</p><p>这是一个例子：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> componentsPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuepress-plugin-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">componentsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      componentOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        artPlayer<span class="token operator">:</span> <span class="token punctuation">{</span>
          fastForward<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          screenshot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mse" tabindex="-1"><a class="header-anchor" href="#mse" aria-hidden="true">#</a> MSE</h2>`,8),z={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Media_Source_Extensions_API",target:"_blank",rel:"noopener noreferrer"},R={href:"https://github.com/video-dev/hls.js",target:"_blank",rel:"noopener noreferrer"},$={href:"https://github.com/xqq/mpegts.js",target:"_blank",rel:"noopener noreferrer"},F={href:"https://github.com/Dash-Industry-Forum/dash.js",target:"_blank",rel:"noopener noreferrer"},J=n("p",null,"在你的项目中安装上述依赖以支持下列格式:",-1),Q=n("div",{class:"language-bash","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"pnpm"),s(),n("span",{class:"token function"},"add"),s(),n("span",{class:"token parameter variable"},"-D"),s(` dashjs hls.js mpegts.js
`)])])],-1),W=n("div",{class:"language-bash","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"yarn"),s(),n("span",{class:"token function"},"add"),s(),n("span",{class:"token parameter variable"},"-D"),s(` dashjs hls.js mpegts.js
`)])])],-1),G=n("div",{class:"language-bash","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"npm"),s(" i "),n("span",{class:"token parameter variable"},"-D"),s(` dashjs hls.js mpegts.js
`)])])],-1),X=n("div",{class:"language-markdown","data-ext":"md"},[n("pre",{class:"language-markdown"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ArtPlayer")]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("https://mse-demo.u2sb.com/dash/master.m3u8"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`)])])],-1),Y=n("div",{class:"language-markdown","data-ext":"md"},[n("pre",{class:"language-markdown"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ArtPlayer")]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.flv"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`)])])],-1),Z=n("div",{class:"language-markdown","data-ext":"md"},[n("pre",{class:"language-markdown"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ArtPlayer")]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("https://mse-demo.u2sb.com/dash/caminandes_03_llamigos_720p.mpd"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`)])])],-1),nn=d('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>该组件可以自动识别具有 <code>m3u8</code>、<code>flv</code> 或 <code>mpd</code> 扩展名的链接。</p><p>在其他情况下，你应该手动将 <code>type</code> 设置为上述其中之一。</p></div><h2 id="高级用法" tabindex="-1"><a class="header-anchor" href="#高级用法" aria-hidden="true">#</a> 高级用法</h2><h3 id="额外的格式支持" tabindex="-1"><a class="header-anchor" href="#额外的格式支持" aria-hidden="true">#</a> 额外的格式支持</h3><p>你可以通过 <code>config</code> 属性在 ArtPlayer 选项中使用 <code>customType</code> 选项支持其他格式的视频。</p>',4),sn=d(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArtPlayer</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://mse-demo.u2sb.com/dash/master.m3u8<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customHLS<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>artPlayerConfig<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> artPlayerConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">customType</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">customHLS</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">mediaElement<span class="token punctuation">,</span> src<span class="token punctuation">,</span> player</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          mediaElement<span class="token punctuation">.</span><span class="token function">canPlayType</span><span class="token punctuation">(</span><span class="token string">&quot;application/x-mpegURL&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>
          mediaElement<span class="token punctuation">.</span><span class="token function">canPlayType</span><span class="token punctuation">(</span><span class="token string">&quot;application/vnd.apple.mpegURL&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
          mediaElement<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token constant">HLS</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;hls.js/dist/hls.min.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>
          <span class="token keyword">const</span> hls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HLS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          hls<span class="token punctuation">.</span><span class="token function">attachMedia</span><span class="token punctuation">(</span>mediaElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
          hls<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token constant">HLS</span><span class="token punctuation">.</span>Events<span class="token punctuation">.</span><span class="token constant">MEDIA_ATTACHED</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            hls<span class="token punctuation">.</span><span class="token function">loadSource</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          player<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;destroy&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            hls<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加插件" tabindex="-1"><a class="header-anchor" href="#添加插件" aria-hidden="true">#</a> 添加插件</h3><p>这是一个添加弹幕库插件的演示:</p>`,3),an=d(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArtPlayer</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>artPlayerDanmukuConfig<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:customPlayer</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customPlayer<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> artplayerPluginDanmuku <span class="token keyword">from</span> <span class="token string">&quot;artplayer-plugin-danmuku&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token constant">DANMAKU_API</span> <span class="token operator">=</span> <span class="token string">&quot;https://danmu.u2sb.com/api/artplayer/v1&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">DANMAKU_ID</span> <span class="token operator">=</span> <span class="token string">&quot;jsdKLNMks21NMij&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">BILIBILI_DANMAKU</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">DANMAKU_API</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/bilibili/BV1cs411Q7Ng/3.json</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> danmukuOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">danmuku</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">BILIBILI_DANMAKU</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">DANMAKU_API</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">DANMAKU_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          res<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          res
            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
              <span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
                r<span class="token punctuation">[</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
                r<span class="token punctuation">[</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                r<span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
                r<span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>cur<span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> artPlayerDanmukuConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">artplayerPluginDanmuku</span><span class="token punctuation">(</span>danmukuOptions<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">customPlayer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    player<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;artplayerPluginDanmuku:emit&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">danmuku</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">DANMAKU_API</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">Accept</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">Id</span><span class="token operator">:</span> <span class="token constant">DANMAKU_ID</span><span class="token punctuation">,</span>
          <span class="token literal-property property">Referrer</span><span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">,</span>
          <span class="token operator">...</span>danmuku<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),v="https://danmu.u2sb.com/api/artplayer/v1",h="jsdKLNMks21NMij",tn={__name:"artplayer.html",setup(en){const b={customType:{customHLS:async(p,e,c)=>{if(p.canPlayType("application/x-mpegURL")||p.canPlayType("application/vnd.apple.mpegURL"))p.src=e;else{const r=(await A(()=>import("./hls.min-37a9d274.js").then(u=>u.h),["assets/hls.min-37a9d274.js","assets/commonjsHelpers-725317a4.js"])).default,o=new r;o.attachMedia(p),o.on(r.Events.MEDIA_ATTACHED,()=>{o.loadSource(e)}),c.on("destroy",()=>{o.destroy()})}}}},g=`${v}/bilibili/BV1cs411Q7Ng/3.json`,y={plugins:[P({danmuku:()=>Promise.allSettled([fetch(g).then(p=>p.json()),fetch(`${v}/${h}.json`).then(p=>p.json())]).then(p=>p.filter(e=>e.status==="fulfilled").map(e=>e.value)).then(p=>p.filter(e=>e.code!==void 0&&e.code===0&&e.data!==void 0&&e.data.length>0).reduce((e,c)=>e.concat(c.data),[]))})]},_=p=>{p.on("artplayerPluginDanmuku:emit",e=>{fetch(v,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({Id:h,Referrer:window.location.origin+window.location.pathname,...e})})})};return(p,e)=>{const c=k("ExternalLinkIcon"),r=k("CodeTabs"),o=k("ArtPlayer"),u=k("MdDemo");return f(),q("div",null,[n("p",null,[s("在 Markdown 文件中嵌入 "),n("a",x,[s("ArtPlayer"),a(c)]),s("。")]),D,a(r,{id:"6",data:[{id:"pnpm"},{id:"yarn"},{id:"npm"}],"tab-id":"shell"},{title0:t(({value:l,isActive:i})=>[s("pnpm")]),title1:t(({value:l,isActive:i})=>[s("yarn")]),title2:t(({value:l,isActive:i})=>[s("npm")]),tab0:t(({value:l,isActive:i})=>[j]),tab1:t(({value:l,isActive:i})=>[I]),tab2:t(({value:l,isActive:i})=>[M]),_:1}),m(" more "),n("div",N,[L,n("p",null,[S,s(" 组件提供快速插入 "),n("a",T,[s("ArtPlayer"),a(c)]),s(" 播放器的能力，如果你需要高级用法你应该阅读 "),n("a",E,[s("ArtPlayer 文档"),a(c)]),s("。")])]),O,m(" #region demo "),a(u,{title:"一个视频播放器",id:"md-demo-27"},{default:t(()=>[a(o,{src:"https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4"})]),code:t(()=>[C]),_:1}),a(u,{title:"一个包含了封面的播放器",id:"md-demo-32"},{default:t(()=>[a(o,{src:"https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4",poster:"/poster.svg"})]),code:t(()=>[U]),_:1}),a(u,{title:"一个包含自定义设置的播放器",id:"md-demo-36"},{default:t(()=>[a(o,{src:"https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4",airplay:"","aspect-ratio":"","auto-size":"","auto-orientation":"","auto-playback":"","fast-forward":"",flip:"","fullscreen-web":"",lock:"",loop:"","is-live":"",muted:"","mini-progress-bar":"",pip:"",screenshot:"","subtitle-offset":""})]),code:t(()=>[K]),_:1}),m(" #endregion demo "),H,n("p",null,[s("有关详细信息，请参阅 "),n("a",B,[s("ArtPlayer 文档"),a(c)])]),V,n("p",null,[s("MSE 全称 Media Source Extensions， 详见 "),n("a",z,[s("Media Source Extensions API"),a(c)]),s("。")]),n("p",null,[s("组件通过 "),n("a",R,[s("hls.js"),a(c)]),s("、 "),n("a",$,[s("mpegts.js"),a(c)]),s("、 "),n("a",F,[s("dashjs"),a(c)]),s(" 带来了了扩展的媒体支持。")]),J,a(r,{id:"368",data:[{id:"pnpm"},{id:"yarn"},{id:"npm"}],"tab-id":"shell"},{title0:t(({value:l,isActive:i})=>[s("pnpm")]),title1:t(({value:l,isActive:i})=>[s("yarn")]),title2:t(({value:l,isActive:i})=>[s("npm")]),tab0:t(({value:l,isActive:i})=>[Q]),tab1:t(({value:l,isActive:i})=>[W]),tab2:t(({value:l,isActive:i})=>[G]),_:1}),a(u,{title:"HLS",id:"md-demo-379"},{default:t(()=>[a(o,{src:"https://mse-demo.u2sb.com/dash/master.m3u8"})]),code:t(()=>[X]),_:1}),a(u,{title:"FLV",id:"md-demo-384"},{default:t(()=>[a(o,{src:"https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.flv"})]),code:t(()=>[Y]),_:1}),a(u,{title:"DASH",id:"md-demo-389"},{default:t(()=>[a(o,{src:"https://mse-demo.u2sb.com/dash/caminandes_03_llamigos_720p.mpd"})]),code:t(()=>[Z]),_:1}),nn,a(o,{src:"https://mse-demo.u2sb.com/dash/master.m3u8",type:"customHLS",config:b}),sn,a(o,{src:"https://vp-demo.u2sb.com/video/caminandes_03_llamigos_720p.mp4",config:y,customPlayer:_}),an])}}},dn=w(tn,[["__file","artplayer.html.vue"]]);export{dn as default};
